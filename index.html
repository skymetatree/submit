<!doctype html>
<html>

<head>
    <title>SkyMetaTree Submit Data</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- nav bar -->
    <header>
        <div class="nav-bar">
            <nav>
                <ul>
                    <li>
                        [<a href="https://skymetatree.github.io/">&lt;- Back</a>]
                        [<a href="https://github.com/skymetatree/submit">GitHub Project</a>]
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- form -->
    <div class="user-form">
        <h3>Minecraft Username [optional]</h3>
        <input id="username" type="text" placeholder="Username" /><br>
        <hr>
        <h3>Setup Name</h3>
        <input id="name" type="text" placeholder="Setup Name" /><br>
        <h3>Armor</h3>
        <input id="helmet_reforge" placeholder="Reforge" list="armor_reforge_list" />
        <input id="helmet" placeholder="Helmet" list="helmets_list" />
        <input id="helmet_upgrades" placeholder="Stars / DEF" list="armor_upgrades_list" />
        <input id="helmet_recombobulated" type="checkbox" /><label for="helmet_recombobulated">Rarity Upgrade</label><br>

        <input id="chestplate_reforge" placeholder="Reforge" list="armor_reforge_list" />
        <input id="chestplate" placeholder="Chestplate" list="chestplates_list" />
        <input id="chestplate_upgrades" placeholder="Stars / DEF" list="armor_upgrades_list" />
        <input id="chestplate_recombobulated" type="checkbox" /><label for="chestplate_recombobulated">Rarity Upgrade</label><br>

        <input id="leggings_reforge" placeholder="Reforge" list="armor_reforge_list" />
        <input id="leggings" placeholder="Leggings" list="leggings_list" />
        <input id="leggings_upgrades" placeholder="Stars / DEF" list="armor_upgrades_list" />
        <input id="leggings_recombobulated" type="checkbox" /><label for="leggings_recombobulated">Rarity Upgrade</label><br>

        <input id="boots_reforge" placeholder="Reforge" list="armor_reforge_list" />
        <input id="boots" placeholder="Boots" list="boots_list" />
        <input id="boots_upgrades" placeholder="Stars / DEF" list="armor_upgrades_list" />
        <input id="boots_recombobulated" type="checkbox" /><label for="boots_recombobulated">Rarity Upgrade</label><br>
        <h3>Pet</h3>
        <input id="pet_rarity" placeholder="Rarity" list="pet_rarity_list" />
        <input id="pet_level" type="number" placeholder="Level" />
        <input id="pet" placeholder="Pet" list="pets_list" /><br>
        <h3>Main Weapon</h3>
        <input id="main_weapon_reforge" placeholder="Reforge" list="full_reforge_list" />
        <input id="main_weapon" placeholder="Main Weapon" list="ability_items_list" />
        <input id="main_weapon_upgrades" placeholder="Stars / Kills" list="weapon_upgrades_list" />
        <input id="main_weapon_recombobulated" type="checkbox" /><label for="main_weapon_recombobulated">Rarity Upgrade</label><br>
        <h3>Skill Requirements</h3>
        <input id="min_skill1" placeholder="Category" list="min_skills_list" />
        <input id="min_skill1_level" placeholder="Level / Amount" /><br>
        <input id="min_skill2" placeholder="Category" list="min_skills_list" />
        <input id="min_skill2_level" placeholder="Level / Amount" /><br>
        <input id="min_skill3" placeholder="Category" list="min_skills_list" />
        <input id="min_skill3_level" placeholder="Level / Amount" /><br>
        <input id="min_skill4" placeholder="Category" list="min_skills_list" />
        <input id="min_skill4_level" placeholder="Level / Amount" /><br>
        <h3>Ability Items</h3>
        <input id="ability_item1_reforge" placeholder="Reforge" list="full_reforge_list" />
        <input id="ability_item1" placeholder="Ability Item" list="ability_items_list" />
        <input id="ability_item1_upgrades" placeholder="Stars / Kills" list="weapon_upgrades_list" />
        <input id="ability_item1_recombobulated" type="checkbox" /><label for="ability_item1_recombobulated">Rarity Upgrade</label><br>
        <input id="ability_item2_reforge" placeholder="Reforge" list="full_reforge_list" />
        <input id="ability_item2" placeholder="Ability Item" list="ability_items_list" />
        <input id="ability_item2_upgrades" placeholder="Stars / Kills" list="weapon_upgrades_list" />
        <input id="ability_item2_recombobulated" type="checkbox" /><label for="ability_item2_recombobulated">Rarity Upgrade</label><br>
        <input id="ability_item3_reforge" placeholder="Reforge" list="full_reforge_list" />
        <input id="ability_item3" placeholder="Ability Item" list="ability_items_list" />
        <input id="ability_item3_upgrades" placeholder="Stars / Kills" list="weapon_upgrades_list" />
        <input id="ability_item3_recombobulated" type="checkbox" /><label for="ability_item3_recombobulated">Rarity Upgrade</label><br>
        <input id="ability_item4_reforge" placeholder="Reforge" list="full_reforge_list" />
        <input id="ability_item4" placeholder="Ability Item" list="ability_items_list" />
        <input id="ability_item4_upgrades" placeholder="Stars / Kills" list="weapon_upgrades_list" />
        <input id="ability_item4_recombobulated" type="checkbox" /><label for="ability_item4_recombobulated">Rarity Upgrade</label><br>
        <hr>
        <h3>Hourly Income</h3>
        <input id="income_description" placeholder="Money Strategy" />
        <input id="income" placeholder="Income Per Hour" /><br>
        <h3>Initial Setup Cost</h3>
        <input id="cost" placeholder="Initial Setup Cost" /><br>

        <hr>
        <h3>Notes</h3>
        <textarea id="notes" style="width:75%;height:5em;word-wrap: normal;" placeholder="Anything you want to add?"></textarea><br>

        <hr>
        <h3>Submit Data</h3>
        <h3 id="status"></h3>
        <button id="submit-button">Send Data to Google Forms</button><br>
        <hr>
    </div>

    <!-- data lists -->
    <datalist id="helmets_list"></datalist>
    <datalist id="chestplates_list"></datalist>
    <datalist id="leggings_list"></datalist>
    <datalist id="boots_list"></datalist>
    <datalist id="pets_list"></datalist>
    <datalist id="pet_rarity_list">
        <option>Common</option>
        <option>Uncommon</option>
        <option>Rare</option>
        <option>Epic</option>
        <option>Legendary</option>
        <option>Mythic</option>
    </datalist>
    <datalist id="weapons_list"></datalist>
    <datalist id="ability_items_list"></datalist>
    <datalist id="min_skills_list">
        <option>Fairy Souls</option>
        <option>Skill Average</option>
        <option>MP Lucky </option>
        <option>MP Warrior </option>
        <option>MP Pretty </option>
        <option>MP Protected </option>
        <option>MP Simple </option>
        <option>MP Disciplined </option>
        <option>MP Commando </option>
        <option>MP Inspired </option>
        <option>MP Prepared </option>
        <option>MP Ominous </option>
        <option>MP Silky </option>
        <option>MP Sweet </option>
        <option>MP Bloody </option>
        <option>MP Itchy </option>
        <option>MP Sighted </option>
        <option>MP Adept </option>
        <option>MP Mythical </option>
        <option>MP Forceful </option>
        <option>MP Shaded </option>
        <option>MP Strong </option>
        <option>MP Demonic </option>
        <option>MP Pleasant </option>
        <option>MP Hurtful </option>
        <option>MP Bizarre </option>
        <option>MP Healthy </option>
        <option>MP Slender </option>
        <option>MP Scorching </option>
        <option>HotM</option>
        <option>Gemstone Powder</option>
        <option>Mithril Powder</option>
        <option>HotM</option>
        <option>Bank Coins</option>
        <option>Zombie Slayer</option>
        <option>Spider Slayer</option>
        <option>Wolf Slayer</option>
        <option>Enderman Slayer</option>
        <option>Blaze Slayer</option>
        <option>Catacombs</option>
        <option>Healer</option>
        <option>Mage</option>
        <option>Berserk</option>
        <option>Archer</option>
        <option>Tank</option>
        <option>Farming</option>
        <option>Mining</option>
        <option>Combat</option>
        <option>Foraging</option>
        <option>Fishing</option>
        <option>Enchanting</option>
        <option>Alchemy</option>
    </datalist>
    <datalist id="armor_reforge_list">
        <!-- armor -->
        <option>Clean</option>
        <option>Fierce</option>
        <option>Heavy</option>
        <option>Light</option>
        <option>Mythic</option>
        <option>Pure</option>
        <option>Smart</option>
        <option>Titanic</option>
        <option>Wise</option>
        <option>Perfect</option>
        <option>Necrotic</option>
        <option>Ancient</option>
        <option>Spiked</option>
        <option>Renowned</option>
        <option>Hyper</option>
        <option>Reinforced</option>
        <option>Loving</option>
        <option>Ridiculous</option>
        <option>Empowered</option>
        <option>Giant</option>
        <option>Submerged</option>
        <option>Jaded</option>
        <!-- duplicate prefix replacements -->
        <option>Very</option>
        <option>Highly</option>
        <option>Extremely</option>
        <option>Not So</option>
        <option>Thicc</option>
        <option>Absolutely</option>
    </datalist>
    <datalist id="sword_reforge_list">
        <!-- swords and fishing rods -->
        <option>Gentle</option>
        <option>Odd</option>
        <option>Fast</option>
        <option>Fair</option>
        <option>Epic</option>
        <option>Sharp</option>
        <option>Heroic</option>
        <option>Spicy</option>
        <option>Legendary</option>
        <option>Dirty</option>
        <option>Fabled</option>
        <option>Suspicious</option>
        <option>Gilded</option>
        <option>Warped</option>
        <option>Withered</option>
        <option>Bulky</option>
    </datalist>
    <datalist id="full_reforge_list">
        <!-- swords and fishing rods -->
        <option>Gentle</option>
        <option>Odd</option>
        <option>Fast</option>
        <option>Fair</option>
        <option>Epic</option>
        <option>Sharp</option>
        <option>Heroic</option>
        <option>Spicy</option>
        <option>Legendary</option>
        <option>Dirty</option>
        <option>Fabled</option>
        <option>Suspicious</option>
        <option>Gilded</option>
        <option>Warped</option>
        <option>Withered</option>
        <option>Bulky</option>
        <!-- bow -->
        <option>Deadly</option>
        <option>Fine</option>
        <option>Grand</option>
        <option>Hasty</option>
        <option>Neat</option>
        <option>Rapid</option>
        <option>Unreal</option>
        <option>Awkward</option>
        <option>Rich</option>
        <option>Precise</option>
        <option>Spiritual</option>
        <option>Headstrong</option>
        <!-- fishing rods -->
        <option>Salty</option>
        <option>Treacherous</option>
        <option>Stiff</option>
        <option>Lucky</option>
        <!-- axe -->
        <option>Double-Bit</option>
        <option>Lumberjack's</option>
        <option>Great</option>
        <option>Rugged</option>
        <option>Lush</option>
        <option>Moil</option>
        <option>Toil</option>
        <!-- hoe / axe -->
        <option>Blessed</option>
        <!-- hoe -->
        <option>Green Thumb</option>
        <option>Peasant's</option>
        <option>Robust</option>
        <option>Zooming</option>
        <option>Bountiful</option>
        <!-- pickaxe / drill -->
        <option>Unyielding</option>
        <option>Prospector's</option>
        <option>Excellent</option>
        <option>Sturdy</option>
        <option>Fortunate</option>
        <option>Magnetic</option>
        <option>Fruitful</option>
        <option>Refined</option>
        <option>Stellar</option>
        <option>Mithraic</option>
        <option>Auspicious</option>
        <option>Fleet</option>
        <option>Heated</option>
        <option>Ambered</option>
        <!-- duplicate prefix replacements pickaxe / drill -->
        <option>Even More</option>
        <!-- equipment -->
        <option>Waxed</option>
        <option>Fortified</option>
        <option>Strengthened</option>
        <option>Glistening</option>
        <!-- armor -->
        <option>Clean</option>
        <option>Fierce</option>
        <option>Heavy</option>
        <option>Light</option>
        <option>Mythic</option>
        <option>Pure</option>
        <option>Smart</option>
        <option>Titanic</option>
        <option>Wise</option>
        <option>Perfect</option>
        <option>Necrotic</option>
        <option>Ancient</option>
        <option>Spiked</option>
        <option>Renowned</option>
        <option>Hyper</option>
        <option>Reinforced</option>
        <option>Loving</option>
        <option>Ridiculous</option>
        <option>Empowered</option>
        <option>Giant</option>
        <option>Submerged</option>
        <option>Jaded</option>
        <!-- duplicate prefix replacements armor -->
        <option>Very</option>
        <option>Highly</option>
        <option>Extremely</option>
        <option>Not So</option>
        <option>Thicc</option>
        <option>Absolutely</option>
    </datalist>
    <datalist id="armor_upgrades_list">
        <option></option>
        <option>1✪</option>
        <option>2✪</option>
        <option>3✪</option>
        <option>4✪</option>
        <option>5✪</option>
        <option>6✪</option>
        <option>7✪</option>
        <option>8✪</option>
        <option>9✪</option>
        <option>10✪</option>
        <option>11✪</option>
        <option>12✪</option>
        <option>13✪</option>
        <option>14✪</option>
        <option>15✪</option>
        <option>+20❈</option>
        <option>+40❈</option>
        <option>+45❈</option>
        <option>+50❈</option>
        <option>+50❈</option>
        <option>+60❈</option>
        <option>+90❈</option>
        <option>+110❈</option>
        <option>+120❈</option>
        <option>+135❈</option>
        <option>+150❈</option>
        <option>+160❈</option>
        <option>+180❈</option>
        <option>+200❈</option>
        <option>+210❈</option>
        <option>+215❈</option>
        <option>+220❈</option>
        <option>+235❈</option>
        <option>+240❈</option>
        <option>+250❈</option>
        <option>+260❈</option>
        <option>+270❈</option>
        <option>+280❈</option>
        <option>+285❈</option>
        <option>+300❈</option>
        <option>+310❈</option>
        <option>+315❈</option>
        <option>+335❈</option>
        <option>+355❈</option>
        <option>+370❈</option>
        <option>+380❈</option>
        <option>+390❈</option>
        <option>+395❈</option>
        <option>+400❈</option>
    </datalist>
    <datalist id="weapon_upgrades_list">
        <option></option>
        <option>1✪</option>
        <option>2✪</option>
        <option>3✪</option>
        <option>4✪</option>
        <option>5✪</option>
        <option>6✪</option>
        <option>7✪</option>
        <option>8✪</option>
        <option>9✪</option>
        <option>10✪</option>
        <option>11✪</option>
        <option>12✪</option>
        <option>13✪</option>
        <option>14✪</option>
        <option>15✪</option>
    </datalist>

    <!-- script -->
    <script>
        const pet_data = [{
            id: "ARMADILLO",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "BAT",
            rarities: ["common", "uncommon", "rare", "epic", "legendary", "mythic"],
            maxLevel: 100,
        }, {
            id: "BLAZE",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "CHICKEN",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "HORSE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "JERRY",
            rarities: ["common", "uncommon", "rare", "epic", "legendary", "mythic"],
            maxLevel: 100,
        }, {
            id: "OCELOT",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "PIGMAN",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "RABBIT",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SHEEP",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SILVERFISH",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "WITHER_SKELETON",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SKELETON_HORSE",
            rarities: ["legendary"],
            maxLevel: 100,
        }, {
            id: "WOLF",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "ENDERMAN",
            rarities: ["common", "uncommon", "rare", "epic", "legendary", "mythic"],
            maxLevel: 100,
        }, {
            id: "PHOENIX",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "MAGMA_CUBE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "FLYING_FISH",
            rarities: ["rare", "epic", "legendary", "mythic"],
            maxLevel: 100,
        }, {
            id: "BLUE_WHALE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "TIGER",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "LION",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "PARROT",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SNOWMAN",
            rarities: ["legendary"],
            maxLevel: 100,
        }, {
            id: "TURTLE",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "BEE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "ENDER_DRAGON",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GUARDIAN",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SQUID",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GIRAFFE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "ELEPHANT",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "MONKEY",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SPIDER",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "ENDERMITE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GHOUL",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "JELLYFISH",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "PIG",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "ROCK",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SKELETON",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "ZOMBIE",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "DOLPHIN",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "BABY_YETI",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "MEGALODON",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GOLEM",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "HOUND",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "TARANTULA",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "BLACK_CAT",
            rarities: ["legendary"],
            maxLevel: 100,
        }, {
            id: "SPIRIT",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GRIFFIN",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "MITHRIL_GOLEM",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GRANDMA_WOLF",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "RAT",
            rarities: ["legendary", "mythic"],
            maxLevel: 100,
        }, {
            id: "BAL",
            rarities: ["epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SCATHA",
            rarities: ["rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "GOLDEN_DRAGON",
            rarities: ["legendary"],
            maxLevel: 200,
        }, {
            id: "AMMONITE",
            rarities: ["legendary"],
            maxLevel: 100,
        }, {
            id: "MOOSHROOM_COW",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "SNAIL",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "KUUDRA",
            rarities: ["common", "uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, {
            id: "WISP",
            rarities: ["uncommon", "rare", "epic", "legendary"],
            maxLevel: 100,
        }, ];

        var skyblock_pets = {};
        var skyblock_helmets = {};
        var skyblock_chestplates = {};
        var skyblock_leggings = {};
        var skyblock_boots = {};
        var skyblock_weapons = {};
        var skyblock_ability_items = {};

        const tmp_list = document.getElementById("pets_list");
        pet_data.forEach(function(item) {
            var option = document.createElement("option");
            var pet_name = item.id.replace(/_/, " ").split(" ")
                .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())
                .join(" ");
            option.value = pet_name;
            skyblock_pets[pet_name] = {
                rarities: item.rarities,
                maxLevel: item.maxLevel,
            };
            tmp_list.appendChild(option);
        });

        function getItemTier(itemTier) {
            return (itemTier == undefined || itemTier.length < 1) ? "&c" : ("&" + itemTier[0].toLowerCase());
        }

        function addToDatalist(datalistId, optionName) {
            var option = document.createElement("option");
            option.value = optionName;
            document.getElementById(datalistId).appendChild(option);
        }
        async function loadSkyBlockItems() {
            const response = await fetch("https://api.hypixel.net/resources/skyblock/items");
            var skyblockitems = await response.json();
            skyblockitems = skyblockitems.items;

            skyblockitems.forEach(function(item) {
                if (item.category == undefined) {
                    return;
                }
                const name = getItemTier(item.tier) + item.name;
                const category = item.category;
                if (category === "HELMET") {
                    const tmp_name = name.replace(/( Helmet)|(Helmet of the )|(Helmet of )|( -)|(Helmet Of )|('s Helmet)/, "");
                    addToDatalist("helmets_list", tmp_name);
                    skyblock_helmets[tmp_name] = item;
                }
                if (category === "CHESTPLATE") {
                    const tmp_name = name.replace(/( Chestplate)|(Chestplate of the )|(Chestplate of )|( -)|(Chestplate Of )|('s Chestplate)/, "");
                    addToDatalist("chestplates_list", tmp_name);
                    skyblock_chestplates[tmp_name] = item;
                }
                if (category === "LEGGINGS") {
                    const tmp_name = name.replace(/( Leggings)|(Leggings of the )|(Leggings of )|( -)|(Leggings Of )|('s Leggings)/, "");
                    addToDatalist("leggings_list", tmp_name);
                    skyblock_leggings[tmp_name] = item;
                }
                if (category === "BOOTS") {
                    const tmp_name = name.replace(/( Boots)|(Boots of the )|(Boots of )|( -)|(Boots Of )|('s Boots)/, "");
                    addToDatalist("boots_list", tmp_name);
                    skyblock_boots[tmp_name] = item;
                }
                if (category === "SWORD" || category === "BOW" || category === "FISHING_WEAPON" || category === "LONGSWORD") {
                    addToDatalist("ability_items_list", name);
                    skyblock_ability_items[name] = item;
                }
                if (category === "WAND" || category === "PICKAXE" || category === "AXE" || category === "HOE" ||
                    category === "FISHING_ROD" || category === "ACCESSORY" || category === "NECKLACE" ||
                    category === "BELT" || category === "CLOAK" || category === "GAUNTLET" || category === "DEPLOYABLE" ||
                    category === "DRILL" || category === "SPADE" || category === "SHEARS" || category === "GLOVES" || category === "BRACELET") {
                    addToDatalist("ability_items_list", name);
                    skyblock_ability_items[name] = item;
                }
            });
        }
        loadSkyBlockItems();

        function isValidSelection(datalistID, selectedvalue) {
            var options = document.getElementById(datalistID).children;
            for (var i = 0; i < options.length; i++) {
                if (options[i].value === selectedvalue) {
                    return true;
                }
            }
            return false;
        }

        function getUpgradedItemRarity(itemName) {
            if (itemName[0] !== "&" || itemName.length < 2) {
                return itemName;
            }
            const rarityOrder = "curelmdsvx";
            return itemName[0] + rarityOrder[rarityOrder.indexOf(itemName[1]) + 1] + itemName.slice(2);
        }

        function isValidReforge(itemName, selectedReforge) {
            const reforges = {
                SWORD: ["Dirty", "Fabled", "Suspicious", "Gilded", "Warped", "Withered", "Bulky", "Gentle", "Odd", "Fast", "Fair", "Epic", "Sharp", "Heroic", "Spicy", "Legendary"],
                LONGSWORD: this.SWORD,
                WAND: this.SWORD,
                BOW: ["Deadly", "Fine", "Grand", "Hasty", "Neat", "Rapid", "Unreal", "Awkward", "Rich", "Precise", "Spiritual", "Headstrong"],
                FISHING_ROD: ["Salty", "Treacherous", "Stiff", "Lucky", "Gentle", "Odd", "Fast", "Fair", "Epic", "Sharp", "Heroic", "Spicy", "Legendary"],
                FISHING_WEAPON: this.FISHING_ROD,
                AXE: ["Double-Bit", "Lumberjack's", "Great", "Rugged", "Lush", "Moil", "Toil", "Blessed"],
                HOE: ["Green Thumb", "Peasant's", "Robust", "Zooming", "Bountiful", "Blessed"],
                PICKAXE: ["Unyielding", "Prospector's", "Excellent", "Sturdy", "Fortunate", "Magnetic", "Fruitful", "Refined", "Stellar", "Mithraic", "Auspicious", "Fleet", "Heated", "Ambered", "Even More"],
                DRILL: this.PICKAXE,
                NECKLACE: ["Waxed", "Fortified", "Strengthened", "Glistening"],
                GAUNTLET: this.NECKLACE,
                CLOAK: this.NECKLACE,
                BELT: this.NECKLACE,
                BRACELET: this.NECKLACE,
                GLOVES: this.NECKLACE,
                ACCESSORY: [],
                SPADE: [],
                SHEARS: [],
                DEPLOYABLE: [],
            };
            return reforges[skyblock_ability_items[itemName].category].includes(selectedReforge);
        }

        const button = document.getElementById("submit-button");
        button.addEventListener("click", function(event) {
            document.getElementById("status").innerHTML = "";
            event.preventDefault();
            const cooldown_counter = 10;
            var counter = cooldown_counter;
            document.getElementById("submit-button").innerHTML = "Submission Cooldown - " + counter + "s";
            var cooldown_id = setInterval(function() {
                counter--;
                document.getElementById("submit-button").innerHTML = "Submission Cooldown - " + counter + "s";
            }, 1000);
            var timeout_id = setTimeout(function() {
                clearInterval(cooldown_id);
                button.disabled = false;
                document.getElementById("submit-button").innerHTML = "Send Data to Google Forms";
            }, cooldown_counter * 1000);
            button.disabled = true;

            var result = "";

            const name = document.getElementById("name").value;
            if (name === "") {
                document.getElementById("status").innerHTML = "'Setup Name' is missing!";
                return;
            }
            result += "%22name%22%3A+"; // "name": 
            result += "%22" + encodeURIComponent(name) + "%22"; // "value"
            result += "%2C%0D%0A"; // ,\r\n

            var helmet = document.getElementById("helmet").value;
            const helmet_reforge = document.getElementById("helmet_reforge").value;
            const helmet_upgrades = document.getElementById("helmet_upgrades").value;
            const helmet_recombobulated = document.getElementById("helmet_recombobulated").checked;
            if (helmet === "") {
                // no helmet, no problem
            } else if (!isValidSelection("helmets_list", helmet)) {
                document.getElementById("status").innerHTML = "'Helmet' is invalid!";
                return;
            } else if (helmet_reforge !== "" && !isValidSelection("armor_reforge_list", helmet_reforge)) {
                document.getElementById("status").innerHTML = "'Helmet Reforge' is invalid!";
                return;
            } else {
                if (helmet_reforge !== "") {
                    helmet = (helmet[0] === "&" ? (helmet[0] + helmet[1]) : "") + helmet_reforge + " " + (helmet[0] === "&" ? helmet.slice(2) : helmet);
                }
                if (helmet_recombobulated) {
                    helmet = getUpgradedItemRarity(helmet);
                }
                if (helmet_upgrades !== "") {
                    helmet = helmet + " " + helmet_upgrades;
                }
                result += "%22helmet%22%3A+";
                result += "%22" + encodeURIComponent(helmet) + "%22";
                result += "%2C%0D%0A";
            }

            var chestplate = document.getElementById("chestplate").value;
            const chestplate_reforge = document.getElementById("chestplate_reforge").value;
            const chestplate_upgrades = document.getElementById("chestplate_upgrades").value;
            const chestplate_recombobulated = document.getElementById("chestplate_recombobulated").checked;
            if (chestplate === "") {
                // no chestplate, no problem
            } else if (!isValidSelection("chestplates_list", chestplate)) {
                document.getElementById("status").innerHTML = "'Chestplate' is invalid!";
                return;
            } else if (chestplate_reforge !== "" && !isValidSelection("armor_reforge_list", chestplate_reforge)) {
                document.getElementById("status").innerHTML = "'Chestplate Reforge' is invalid!";
                return;
            } else {
                if (chestplate_reforge !== "") {
                    chestplate = (chestplate[0] === "&" ? (chestplate[0] + chestplate[1]) : "") + chestplate_reforge + " " + (chestplate[0] === "&" ? chestplate.slice(2) : chestplate)
                }
                if (chestplate_recombobulated) {
                    chestplate = getUpgradedItemRarity(chestplate);
                }
                if (chestplate_upgrades !== "") {
                    chestplate = chestplate + " " + chestplate_upgrades;
                }
                result += "%22chestplate%22%3A+";
                result += "%22" + encodeURIComponent(chestplate) + "%22";
                result += "%2C%0D%0A";
            }

            var leggings = document.getElementById("leggings").value;
            const leggings_reforge = document.getElementById("leggings_reforge").value;
            const leggings_upgrades = document.getElementById("leggings_upgrades").value;
            const leggings_recombobulated = document.getElementById("leggings_recombobulated").checked;
            if (leggings === "") {
                // no leggings, no problem
            } else if (!isValidSelection("leggings_list", leggings)) {
                document.getElementById("status").innerHTML = "'Leggings' is invalid!";
                return;
            } else if (leggings_reforge !== "" && !isValidSelection("armor_reforge_list", leggings_reforge)) {
                document.getElementById("status").innerHTML = "'Leggings Reforge' is invalid!";
                return;
            } else {
                if (leggings_reforge !== "") {
                    leggings = (leggings[0] === "&" ? (leggings[0] + leggings[1]) : "") + leggings_reforge + " " + (leggings[0] === "&" ? leggings.slice(2) : leggings)
                }
                if (leggings_recombobulated) {
                    leggings = getUpgradedItemRarity(leggings);
                }
                if (leggings_upgrades !== "") {
                    leggings = leggings + " " + leggings_upgrades;
                }
                result += "%22leggings%22%3A+";
                result += "%22" + encodeURIComponent(leggings) + "%22";
                result += "%2C%0D%0A";
            }

            var boots = document.getElementById("boots").value;
            const boots_reforge = document.getElementById("boots_reforge").value;
            const boots_upgrades = document.getElementById("boots_upgrades").value;
            const boots_recombobulated = document.getElementById("boots_recombobulated").checked;
            if (boots === "") {
                // no boots, no problem
            } else if (!isValidSelection("boots_list", boots)) {
                document.getElementById("status").innerHTML = "'Boots' is invalid!";
                return;
            } else if (boots_reforge !== "" && !isValidSelection("armor_reforge_list", boots_reforge)) {
                document.getElementById("status").innerHTML = "'Boots Reforge' is invalid!";
                return;
            } else {
                if (boots_reforge !== "") {
                    boots = (boots[0] === "&" ? (boots[0] + boots[1]) : "") + boots_reforge + " " + (boots[0] === "&" ? boots.slice(2) : boots)
                }
                if (boots_recombobulated) {
                    boots = getUpgradedItemRarity(boots);
                }
                if (boots_upgrades !== "") {
                    boots = boots + " " + boots_upgrades;
                }
                result += "%22boots%22%3A+";
                result += "%22" + encodeURIComponent(boots) + "%22";
                result += "%2C%0D%0A";
            }

            var pet = document.getElementById("pet").value;
            const pet_rarity = document.getElementById("pet_rarity").value;
            const pet_level = document.getElementById("pet_level").value;
            if (pet === "") {
                // no pet, no problem
            } else if (!isValidSelection("pets_list", pet)) {
                document.getElementById("status").innerHTML = "'Pet' is invalid!";
                return;
            } else if (pet_rarity !== "" && !skyblock_pets[pet].rarities.includes(pet_rarity.toLowerCase())) {
                document.getElementById("status").innerHTML = "'Pet Rarity' is invalid!";
                return;
            } else if (pet_level !== "" && !(parseInt(pet_level) <= skyblock_pets[pet].maxLevel && parseInt(pet_level) >= 0)) {
                document.getElementById("status").innerHTML = "'Pet Level' is invalid!";
                return;
            } else {
                if (pet_level !== "") {
                    pet = "[Lvl " + pet_level + "] " + pet;
                }
                if (pet_rarity !== "") {
                    pet = "&" + pet_rarity[0].toLowerCase() + pet;
                }
                result += "%22pet%22%3A+";
                result += "%22" + encodeURIComponent(pet) + "%22";
                result += "%2C%0D%0A";
            }

            var main_weapon = document.getElementById("main_weapon").value;
            const main_weapon_reforge = document.getElementById("main_weapon_reforge").value;
            const main_weapon_upgrades = document.getElementById("main_weapon_upgrades").value;
            const main_weapon_recombobulated = document.getElementById("main_weapon_recombobulated").checked;
            if (main_weapon === "") {
                // no main_weapon, no problem
            } else if (!isValidSelection("ability_items_list", main_weapon)) {
                document.getElementById("status").innerHTML = "'Main Weapon' is invalid!";
                return;
            } else if (main_weapon_reforge !== "" && !isValidReforge(main_weapon, main_weapon_reforge)) {
                document.getElementById("status").innerHTML = "'Main Weapon Reforge' is invalid!";
                return;
            } else {
                if (main_weapon_reforge !== "") {
                    main_weapon = (main_weapon[0] === "&" ? (main_weapon[0] + main_weapon[1]) : "") + main_weapon_reforge + " " + (main_weapon[0] === "&" ? main_weapon.slice(2) : main_weapon)
                }
                if (main_weapon_recombobulated) {
                    main_weapon = getUpgradedItemRarity(main_weapon);
                }
                if (main_weapon_upgrades !== "") {
                    main_weapon = main_weapon + " " + main_weapon_upgrades;
                }
                result += "%22main_weapon%22%3A+";
                result += "%22" + encodeURIComponent(main_weapon) + "%22";
                result += "%2C%0D%0A";
            }

            var valid_skills = [];
            const min_skill1 = document.getElementById("min_skill1").value;
            const min_skill1_level = document.getElementById("min_skill1_level").value;
            if (min_skill1 === "") {
                // no min_skill1, no problem
            } else if (!isValidSelection("min_skills_list", min_skill1)) {
                document.getElementById("status").innerHTML = "'Skill Requirement 1' is invalid!";
                return;
            } else if (!/[0-9]{1,3}(.[0-9])?[kmb]?/.test(min_skill1_level)) {
                document.getElementById("status").innerHTML = "'Skill Level 1' is invalid!";
                return;
            } else {
                valid_skills.push({
                    name: min_skill1,
                    level: min_skill1_level
                });
            }
            const min_skill2 = document.getElementById("min_skill2").value;
            const min_skill2_level = document.getElementById("min_skill2_level").value;
            if (min_skill2 === "") {
                // no min_skill2, no problem
            } else if (!isValidSelection("min_skills_list", min_skill2)) {
                document.getElementById("status").innerHTML = "'Skill Requirement 2' is invalid!";
                return;
            } else if (!/[0-9]{1,3}(.[0-9])?[kmb]?/.test(min_skill2_level)) {
                document.getElementById("status").innerHTML = "'Skill Level 2' is invalid!";
                return;
            } else {
                valid_skills.push({
                    name: min_skill2,
                    level: min_skill2_level
                });
            }
            const min_skill3 = document.getElementById("min_skill3").value;
            const min_skill3_level = document.getElementById("min_skill3_level").value;
            if (min_skill3 === "") {
                // no min_skill3, no problem
            } else if (!isValidSelection("min_skills_list", min_skill3)) {
                document.getElementById("status").innerHTML = "'Skill Requirement 3' is invalid!";
                return;
            } else if (!/[0-9]{1,3}(.[0-9])?[kmb]?/.test(min_skill3_level)) {
                document.getElementById("status").innerHTML = "'Skill Level 3' is invalid!";
                return;
            } else {
                valid_skills.push({
                    name: min_skill3,
                    level: min_skill3_level
                });
            }
            const min_skill4 = document.getElementById("min_skill4").value;
            const min_skill4_level = document.getElementById("min_skill4_level").value;
            if (min_skill4 === "") {
                // no min_skill4, no problem
            } else if (!isValidSelection("min_skills_list", min_skill4)) {
                document.getElementById("status").innerHTML = "'Skill Requirement 4' is invalid!";
                return;
            } else if (!/[0-9]{1,3}(.[0-9])?[kmb]?/.test(min_skill4_level)) {
                document.getElementById("status").innerHTML = "'Skill Level 4' is invalid!";
                return;
            } else {
                valid_skills.push({
                    name: min_skill4,
                    level: min_skill4_level
                });
            }
            if (valid_skills.length > 0) {
                result += "%22min_skills%22%3A+";
                result += "%5B";
                for (var i = 0; i < valid_skills.length - 1; i++)
                    result += "%22" + encodeURIComponent(valid_skills[i].name + " " + valid_skills[i].level) + "%22%2C";
                result += "%22" + encodeURIComponent(valid_skills[i].name + " " + valid_skills[i].level) + "%22";
                result += "%5D%2C%0D%0A";
            }

            var valid_ability_items = [];
            var ability_item1 = document.getElementById("ability_item1").value;
            const ability_item1_reforge = document.getElementById("ability_item1_reforge").value;
            const ability_item1_upgrades = document.getElementById("ability_item1_upgrades").value;
            const ability_item1_recombobulated = document.getElementById("ability_item1_recombobulated").checked;
            if (ability_item1 === "") {
                // no ability_item1, no problem
            } else if (!isValidSelection("ability_items_list", ability_item1)) {
                document.getElementById("status").innerHTML = "'Ability Item 1' is invalid!";
                return;
            } else if (ability_item1_reforge !== "" && !isValidReforge(ability_item1, ability_item1_reforge)) {
                document.getElementById("status").innerHTML = "'Ability Item 1 Reforge' is invalid!";
                return;
            } else {
                if (ability_item1_reforge !== "") {
                    ability_item1 = (ability_item1[0] === "&" ? (ability_item1[0] + ability_item1[1]) : "") + ability_item1_reforge + " " + (ability_item1[0] === "&" ? ability_item1.slice(2) : ability_item1)
                }
                if (ability_item1_recombobulated) {
                    ability_item1 = getUpgradedItemRarity(ability_item1);
                }
                if (ability_item1_upgrades !== "") {
                    ability_item1 = ability_item1 + " " + ability_item1_upgrades;
                }
                valid_ability_items.push(ability_item1);
            }

            var ability_item2 = document.getElementById("ability_item2").value;
            const ability_item2_reforge = document.getElementById("ability_item2_reforge").value;
            const ability_item2_upgrades = document.getElementById("ability_item2_upgrades").value;
            const ability_item2_recombobulated = document.getElementById("ability_item2_recombobulated").checked;
            if (ability_item2 === "") {
                // no ability_item2, no problem
            } else if (!isValidSelection("ability_items_list", ability_item2)) {
                document.getElementById("status").innerHTML = "'Ability Item 2' is invalid!";
                return;
            } else if (ability_item2_reforge !== "" && !isValidReforge(ability_item2, ability_item2_reforge)) {
                document.getElementById("status").innerHTML = "'Ability Item 2 Reforge' is invalid!";
                return;
            } else {
                if (ability_item2_reforge !== "") {
                    ability_item2 = (ability_item2[0] === "&" ? (ability_item2[0] + ability_item2[1]) : "") + ability_item2_reforge + " " + (ability_item2[0] === "&" ? ability_item2.slice(2) : ability_item2)
                }
                if (ability_item2_recombobulated) {
                    ability_item2 = getUpgradedItemRarity(ability_item2);
                }
                if (ability_item2_upgrades !== "") {
                    ability_item2 = ability_item2 + " " + ability_item2_upgrades;
                }
                valid_ability_items.push(ability_item2);
            }

            var ability_item3 = document.getElementById("ability_item3").value;
            const ability_item3_reforge = document.getElementById("ability_item3_reforge").value;
            const ability_item3_upgrades = document.getElementById("ability_item3_upgrades").value;
            const ability_item3_recombobulated = document.getElementById("ability_item3_recombobulated").checked;
            if (ability_item3 === "") {
                // no ability_item3, no problem
            } else if (!isValidSelection("ability_items_list", ability_item3)) {
                document.getElementById("status").innerHTML = "'Ability Item 3' is invalid!";
                return;
            } else if (ability_item3_reforge !== "" && !isValidReforge(ability_item3, ability_item3_reforge)) {
                document.getElementById("status").innerHTML = "'Ability Item 3 Reforge' is invalid!";
                return;
            } else {
                if (ability_item3_reforge !== "") {
                    ability_item3 = (ability_item3[0] === "&" ? (ability_item3[0] + ability_item3[1]) : "") + ability_item3_reforge + " " + (ability_item3[0] === "&" ? ability_item3.slice(2) : ability_item3)
                }
                if (ability_item3_recombobulated) {
                    ability_item3 = getUpgradedItemRarity(ability_item3);
                }
                if (ability_item3_upgrades !== "") {
                    ability_item3 = ability_item3 + " " + ability_item3_upgrades;
                }
                valid_ability_items.push(ability_item3);
            }

            var ability_item4 = document.getElementById("ability_item4").value;
            const ability_item4_reforge = document.getElementById("ability_item4_reforge").value;
            const ability_item4_upgrades = document.getElementById("ability_item4_upgrades").value;
            const ability_item4_recombobulated = document.getElementById("ability_item4_recombobulated").checked;
            if (ability_item4 === "") {
                // no ability_item4, no problem
            } else if (!isValidSelection("ability_items_list", ability_item4)) {
                document.getElementById("status").innerHTML = "'Ability Item 4' is invalid!";
                return;
            } else if (ability_item4_reforge !== "" && !isValidReforge(ability_item4, ability_item4_reforge)) {
                document.getElementById("status").innerHTML = "'Ability Item 4 Reforge' is invalid!";
                return;
            } else {
                if (ability_item4_reforge !== "") {
                    ability_item4 = (ability_item4[0] === "&" ? (ability_item4[0] + ability_item4[1]) : "") + ability_item4_reforge + " " + (ability_item4[0] === "&" ? ability_item4.slice(2) : ability_item4)
                }
                if (ability_item4_recombobulated) {
                    ability_item4 = getUpgradedItemRarity(ability_item4);
                }
                if (ability_item4_upgrades !== "") {
                    ability_item4 = ability_item4 + " " + ability_item4_upgrades;
                }
                valid_ability_items.push(ability_item4);
            }

            if (valid_ability_items.length > 0) {
                result += "%22ability_items%22%3A+";
                result += "%5B";
                for (var i = 0; i < valid_ability_items.length - 1; i++)
                    result += "%22" + encodeURIComponent(valid_ability_items[i]) + "%22%2C";
                result += "%22" + encodeURIComponent(valid_ability_items[i]) + "%22";
                result += "%5D%2C%0D%0A";
            }

            const income = document.getElementById("income").value;
            const income_description = document.getElementById("income_description").value;
            if (!/[0-9]{1,3}(.[0-9])?[kmb]?/.test(income)) {
                document.getElementById("status").innerHTML = "'Income Per Hour' is invalid! Valid examples would be '3', '1.6m' or '100k'.";
                return;
            } else if (income_description === "") {
                document.getElementById("status").innerHTML = "'Money Strategy' is missing!";
                return;
            } else {
                result += "%22income%22%3A+";
                result += "%22" + encodeURIComponent(income_description + " - " + income + " coins/h") + "%22";
                result += "%2C%0D%0A";
            }

            const cost = document.getElementById("cost").value;
            if (!/[0-9]{1,3}(.[0-9])?[kmb]?/.test(cost)) {
                document.getElementById("status").innerHTML = "'Initial Setup Cost' is invalid! Valid examples would be '3', '1.6m' or '100k'.";
                return;
            } else {
                result += "%22cost%22%3A+";
                result += "%22" + encodeURIComponent(cost + " coins") + "%22";
                result += "%2C";
            }


            const path = "https://docs.google.com/forms/u/0/d/e/1FAIpQLSfo_YODrIHaz29amZ5XmvMlYEG-SZmbFsSBP9r2UJhgp4Ow5w/formResponse?";
            const params = {
                "entry.640704899": encodeURIComponent(document.getElementById("username").value),
                "entry.667247848": result,
                "entry.1992162842": encodeURIComponent(document.getElementById("notes").value),
            };

            console.log(decodeURIComponent(result));
            fetch(path + Object.entries(params).map(kv => kv.join("=")).join("&"), {
                method: "POST",
                mode: "cors"
            }).finally(() => {
                alert("Thank you for your submission!");
            });
        });

    </script>
</body>

</html>
